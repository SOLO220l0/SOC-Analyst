# 💠 الطبقة الفيزيائية / Physical Layer

## 📌 ما هي الطبقة الفيزيائية؟

أدنى طبقة في نموذج الشبكات (OSI). وظيفتها تحويل البِتّات (0/1) إلى إشارات كهربائية/ضوئية/لاسلكية وإرسالها عبر وسيط مادي (نحاس، ألياف ضوئية، هواء). لا تفهم "إطارات" أو "عناوين" — هذا عمل الطبقات الأعلى — هي فقط تهتم كيف تنتقل البتات فعلياً.

---

## ⚙️ ماذا تفعل بالضبط؟

- **ترميز/تشكيل الإشارة (Signaling):** كيف يبدو نبض البِت على السلك/الليزر/الموجة
- **التزامن (Clocking):** مزامنة المرسل والمستقبل على حدود البِتّات
- **اختيار الوسيط (Medium):** نوع الكابل/الألياف/التردد اللاسلكي
- **تحديد السرعة والـ Duplex:** 10/100/1000… و Half أو Full-Duplex (وغالباً عبر Auto-Negotiation)
- **الميزانية الفيزيائية:** حدود الطول، التوهين، نسبة الإشارة للضجيج، وقوة الإرسال/الاستقبال
- **إدارة الأخطاء الفيزيائية:** معدل خطأ البِت (BER)، أحياناً تصحيح أمامي (FEC) في سرعات عالية
- **التوصيل الفيزيائي:** مقابس، كونّكتورات، ترتيب الأزواج، PoE للطاقة… إلخ

---

## 🔗 الوسائط الشائعة ومتى نستخدمها

### 1. النحاس (Twisted Pair)

- **UTP/STP وفئات:** Cat5e (حتى 1Gbps/100م)، Cat6 (1Gbps/100م، و 10Gbps عادةً حتى 55م)، Cat6A (10Gbps/100م)، Cat7/8 لسيناريوهات خاصة
- **كونّكتور:** RJ-45
- **مزايا:** رخيص، سهل التركيب
- **تحديات:** التداخل الكهرومغناطيسي (EMI)، الطول محدود، حسّاس لجودة التأريض

### 2. الألياف الضوئية (Fiber)

- **Single-Mode (SMF):** مسافات طويلة جداً (كيلومترات)، ليزر 1310/1550nm، كلفة أعلى للموديولات
- **Multi-Mode (MMF):** داخل المباني لمسافات أقصر (OM3/OM4 شائع)، 850nm
- **كونّكتورات:** LC، SC…
- **مزايا:** سعات عالية، لا يتأثر بالـ EMI
- **تحديات:** تركيب دقيق، ميزانية ضوئية (dBm) ونصف الانحناء (Bend Radius)

### 3. لاسلكي (Wi-Fi / Bluetooth / Cellular)

- **الموجات الراديوية:** قنوات، ترددات، عرض نطاق، قدرة إرسال
- **مزايا:** مرونة وسهولة نشر
- **تحديات:** تداخل، تغطية، جدران/حواجز، حساسية للتخطيط

---

## 🔧 كيف تُشفَّر البِتّات إلى إشارات؟

### Line Coding (على النحاس):

- **NRZ/NRZI:** تمثيل مباشر للمستوى
- **Manchester:** انتقال في منتصف البت للمزامنة
- **MLT-3، 4B/5B، 8b/10b، PAM-5/PAM-16** في إيثرنت سلكي بسرعات مختلفة

### Modulation (لاسلكي/أحياناً فايبر):

- **QAM/OFDM** في Wi-Fi الحديثة، CCK/DSSS أقدم

### Baseband vs Passband:

- **Baseband** (إيثرنت نحاس): الإشارة تشغل القناة كلها
- **Passband** (لاسلكي): حاملة بتردد معيّن تُشكَّل بالمعلومة

**مصطلحات سريعة:** Bit Rate = سرعة البِتّات (bps). Baud Rate = سرعة الرموز/الرمز قد يمثل عدة بتات (M-ary).

---

## ⚠️ قيود فيزيائية مهمّة

- **التوهين (Attenuation):** تناقص الإشارة مع المسافة
- **التداخل (Crosstalk/EMI):** تسرُّب بين الأزواج أو من مصادر طاقة
- **الضجيج (Noise) و SNR:** كلما ارتفع SNR زادت السرعة/الاعتمادية
- **الكمون الفيزيائي:**
    - Propagation (سرعة الانتشار في النحاس/الزجاج 0.6–0.7 من سرعة الضوء)
    - Serialization (زمن دفع البِتات على الخط)
- **الارتداد (Return Loss) والتطابق:** سوء إنهاء/توصيل يسبب انعكاسات وتشوه

---

## 🌐 معايير إيثرنت (أمثلة عملية)

- **10/100/1000BASE-T** (نحاس RJ-45): حتى 100 متر
- **10GBASE-T:** يتطلّب كابلات جيّدة (أفضلية Cat6A)
- **1000BASE-SX/LX** (فايبر): SX (MMF لمسافات مئات الأمتار)، LX (SMF حتى كيلومترات)
- **10GBASE-SR/LR/ER** (فايبر): SR (MMF قصيرة)، LR (حتى 10 كم SMF)، ER (حتى 40 كم SMF)
- **وحدات ترانسيڤر:** SFP/SFP+ (1/10G)، QSFP+/QSFP28 (40/100G)… تُختار حسب السرعة والمسافة والنوع

---

## 🔌 الطاقة عبر الإيثرنت (PoE)

- **802.3af (PoE):** حتى 15.4W (للجهاز 12.95W)
- **802.3at (PoE+):** حتى 30W (للجهاز 25.5W)
- **802.3bt (Type 3/4):** 60–90W

مفيد للكاميرات، نقاط الوصول، هواتف IP — مع الانتباه لقدرة السويتش وكابل محترم.

---

## 📡 اتجاه الاتصال

- **Simplex:** اتجاه واحد (بث)
- **Half-Duplex:** إرسال أو استقبال في لحظة واحدة (تصادمات ممكنة)
- **Full-Duplex:** إرسال/استقبال بالتوازي (المعتاد حالياً)

---

## 🔧 التوصيل والكونّكتورات

- **RJ-45** للنحاس (ترتيب الأسلاك T568A/T568B، Auto-MDI/MDI-X جعل الكروساوفر نادراً)
- **LC/SC** للألياف (تثبيت/تنظيف مهم)
- **SFP/QSFP** موديولات قابلة للاستبدال (Hot-swappable) لاختيار مسافة/وسيط مناسب

---

## 💡 مؤشرات الحالة (LEDs) وأحداث الطبقة الفيزيائية

- **Link/Activity LEDs:** يوضح وجود طبقة فيزيائية فعّالة ونشاط
- **Interface Counters:** أخطاء CRC/Fragments/Runts عادةً نتيجة مشاكل فيزيائية/كابل
- **Optical Power (dBm):** يجب أن تكون ضمن الميزانية — أعلى من الحد الأدنى وأقل من التشبّع

---

## 🔍 اختبار واستكشاف الأعطال (Hands-On)

- **كواشف الكابلات/TDR:** يكشف فتح/قصر/انعكاس أزواج وطول تقريبي
- **فاحص ألياف/Visual Fault Locator & OTDR:** لكشف انقطاعات/توهين عالي
- **قياس ضوضاء/EMI:** أبعد كابلات الشبكة عن كابلات كهرباء عالية التيار والمحرّكات

### أفضل ممارسات:

- التزم بطول 100م كحد أقصى لإيثرنت نحاس
- حافظ على Bend Radius في الفايبر
- نظّف فيبر كونيكتور دائماً
- ترتيب كابلات، استخدام باتش بانل، توثيق المنافذ

---

## 📐 لمحة رياضية (بسيطة ومفيدة)

- **Nyquist** (قناة بلا ضجيج): أقصى معدل = 2B log₂ M (B عرض النطاق، M مستويات الترميز)
- **Shannon** (مع ضجيج): السعة C = B log₂(1 + SNR)

**المعنى العملي:** لسرعات أعلى تحتاج عرض نطاق أوسع أو SNR أفضل (وسيط أفضل/مسافة أقصر/قدرة أعلى/ترميز أفضل).

---

## 🛡️ ربطها بعمل SOC والأمن

- مراقبة Link Up/Down، Optical Power، Error Rates للتنبّه لأعطال/تلاعب
- Network Taps أجهزة طبقة فيزيائية لنسخ المرور للتحليل (IDS/Packet Capture)
- الصلابة الفيزيائية: منع توصيل أجهزة مجهولة، قفل المنافذ، تتبّع MAC (طبقة أعلى لكن يبدأ من فيزيائية موثوقة)

---

## 📋 خلاصة سريعة (Cheat-Sheet)

- **المهمة:** نقل البِتّات كإشارات على وسيط مادي
- **اختيار الوسيط:** نحاس (قصير ورخيص)، فيبر (سريع وبعيد)، لاسلكي (مرن)
- **نجاح الرابط =** كابل/كونّكتور صحيح + طول ضمن الحدود + SNR جيّد + سرعة/duplex متوافقين
- **عند المشاكل:** ابدأ بالفيزيائي (LED، كابل آخر، منفذ آخر، فحص TDR/OTDR، قياس dBm)


[[6- Optical Fibers (الألياف الضوئية)]]