# شرح مفصّل — **Default Static Route** (المسار الثابت الافتراضي)

رح أشرح لك كل شيء: ما هو، لماذا نستخدمه، كيفية تكوينه، أمثلة عملية، وسلوك الراوتر عند استخدامه.

---

## 1) ما هو **Default Static Route**؟

**Default Route** هو مسار يُستخدم **عندما لا يوجد مسار محدد في جدول التوجيه للوجهة المطلوبة**.

- غالبًا يُعرف بـ **"Gateway of Last Resort"** على أجهزة Cisco.
    
- يستخدم لتوجيه كل الحزم التي لا تتطابق مع أي **network route** في جدول التوجيه.
    

> باختصار: إذا الراوتر لا يعرف إلى أين يرسل الحزمة → يستخدم default route.

---

## 2) الصيغة العامة على Cisco IOS

### IPv4:

```
ip route 0.0.0.0 0.0.0.0 <next-hop-ip>
```

- `0.0.0.0/0` = أي عنوان وجهة غير محدد.
    
- `<next-hop-ip>` = الراوتر التالي (gateway) الذي يوجه الحزم إلى الإنترنت أو شبكة أكبر.
    

### IPv6:

```
ipv6 route ::/0 <next-hop-ipv6>
```

- `::/0` = أي عنوان IPv6 غير معروف.
    

---

## 3) أمثلة عملية

### مثال 1 — توجيه كل الحزم إلى مزوّد إنترنت

```
ip route 0.0.0.0 0.0.0.0 203.0.113.1
```

- أي حركة خارج الشبكات المحلية تذهب إلى الراوتر `203.0.113.1` (ISP Gateway).
    

### مثال 2 — استخدام floating static route كمسار احتياطي

```
ip route 0.0.0.0 0.0.0.0 203.0.113.2 250
```

- AD أعلى (250) → يُستخدم فقط إذا لم يوجد default route أفضل.
    

### مثال 3 — IPv6 Default Route

```
ipv6 route ::/0 2001:db8:1::1
```

---

## 4) كيف يعمل Default Route

1. الراوتر يستقبل حزمة.
    
2. يبحث في جدول التوجيه عن أفضل تطابق (Longest Prefix Match).
    
3. إذا لم يجد أي تطابق → يستخدم **Default Route (0.0.0.0/0)**.
    
4. يُرسل الحزمة إلى next-hop المحدد في default route.
    

> هذا يسمح للشبكات الداخلية الصغيرة أو الفروع التي لا تحتاج جدول توجيه كامل بالتواصل مع الإنترنت دون معرفة كل شبكة.

---

## 5) Default Static Route vs Default Dynamic Route

|الخاصية|Static Default Route|Dynamic Default Route|
|---|---|---|
|الإدخال|يُدخل يدوياً|يتم الإعلان بواسطة بروتوكول توجيه (مثل OSPF, BGP)|
|التحكم|كامل|يعتمد على updates|
|الاستخدام|فروع صغيرة أو backup|backbone أو multi-ISP|
|Administrative Distance|1 (افتراضي)|عادة أعلى (يعتمد على البروتوكول)|

---

## 6) أمور مهمة وملاحظات

- **الـ next-hop يجب أن يكون reachable**: إذا لم يكن موجود في جدول التوجيه → default route inactive.
    
- يمكن استخدام **exit-interface فقط** على بعض الشبكات point-to-point:
    

```
ip route 0.0.0.0 0.0.0.0 Serial0/0
```

- يمكن دمجه مع **floating static route** لمسار احتياطي.
    
- تحقق من default route على الجهاز باستخدام:
    

```
show ip route | include 0.0.0.0
```

---

## 7) مثال عملي في شبكة فرع

- الشبكة الداخلية: `192.168.10.0/24`
    
- مزوّد الإنترنت: `203.0.113.1`
    

تهيئة default static route:

```
ip route 0.0.0.0 0.0.0.0 203.0.113.1
```

- أي حزمة من شبكة `192.168.10.0/24` موجهة لأي شبكة غير معروفة → ستذهب إلى مزوّد الإنترنت.
    

> الراوتر لا يحتاج معرفة كل شبكة في الإنترنت، يكفي default route واحدة.

---

## 8) أوامر التشخيص

1. **عرض جدول التوجيه ومعرفة default route**:
    

```
show ip route
show ip route | include 0.0.0.0
```

2. **Traceroute لاختبار المسار**:
    

```
traceroute 8.8.8.8
```

3. **التحقق من الوصول للـ next-hop**:
    

```
ping <next-hop-ip>
```

---

## 9) ملخّص سريع

- **Default Static Route** = المسار الذي يُستخدم عند عدم وجود أي route محدد.
    
- الصيغة: `ip route 0.0.0.0 0.0.0.0 <next-hop>` (IPv4) و `ipv6 route ::/0 <next-hop>` (IPv6).
    
- مفيد للفروع، الاتصالات مع الإنترنت، والمسارات الاحتياطية.
    
- يمكن دمجه مع **floating static route** لتوفير بديل إذا تعطل المسار الأساسي.
    

---

إذا تحب، أقدر أرسم لك **مخطط يوضح Default Route على راوتر فرع وكيف توجه الحزم خارج الشبكة المحلية** لتوضيح الفكرة بصريًا.

هل تريد أن أرسمه لك؟