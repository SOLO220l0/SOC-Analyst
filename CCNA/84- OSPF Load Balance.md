

# โ๏ธ **OSPF Load Balancing**

(ุชูุงุฒู ุงูุชุญููู ูู OSPF)

---

## ๐ฏ ุงูููุฑุฉ ุงูุฃุณุงุณูุฉ

> **Load Balancing** ูู OSPF ูุนูู:  
> ุชูุฒูุน ุญุฑูุฉ ุงููุฑูุฑ (Traffic) ุจุงูุชุณุงูู ุนูู ุฃูุซุฑ ูู ูุณุงุฑ ูุญู ููุณ ุงููุฌูุฉ **ุฅุฐุง ูุงูุช ูุฐู ุงููุณุงุฑุงุช ูุชุณุงููุฉ ูู ุงูุชูููุฉ (Equal Cost Paths).**

ุจูููุงุช ุฃุจุณุท:  
ุฅุฐุง ูุงู ุงูุฑุงูุชุฑ ูุนุฑู **ุฃูุซุฑ ูู ุทุฑูู ูููุณ ุงูุดุจูุฉ**ุ ููุงูุช **ูููุฉ ูู ุทุฑูู ูุชุณุงููุฉ (Equal Cost)**ุ ูู OSPF ููููู ุงุณุชุฎุฏุงู **ุฌููุน ูุฐู ุงูุทุฑู ูู ููุณ ุงูููุช** ูุชูุฒูุน ุงูุญูู.

---

## ๐งฉ ููู ูุนูู Load Balancing ูู OSPFุ

ุนูุฏูุง ููุดุบูู OSPF ููุญุณุจ ุงููุณุงุฑุงุชุ ููู ูุฎุชุงุฑ ุงูุทุฑูู ุงูุฐู ููุชูู **ุฃูู ุชูููุฉ (Metric)**.  
ููู ุฅุฐุง ููุฌุฏ ุฃูุซุฑ ูู ุทุฑูู ุจููุณ ุงูุชูููุฉุ ููู ูุง ูุฎุชุงุฑ ูุงุญุฏ ููุท โ ุจู **ูุณุชุฎุฏููุง ุฌููุนูุง**!

๐ฏ ูุฐู ุงูููุฒุฉ ุชูุณูู:

> **ECMP โ Equal Cost Multi-Path Routing**

---

## ๐งฎ ูุซุงู ุชูุถูุญู

ูููุชุฑุถ ุฃู ุงูุฑุงูุชุฑ R1 ููููู ุงููุตูู ุฅูู ุงูุดุจูุฉ 10.0.0.0/24 ุนู ุทุฑูู ูุณุงุฑูู:

```
R1 --- R2 --- 10.0.0.0/24
 \
  \
   R3 --- 10.0.0.0/24
```

- ุงููุณุงุฑ ุนุจุฑ R2 = ุชูููุฉ 20
    
- ุงููุณุงุฑ ุนุจุฑ R3 = ุชูููุฉ 20
    

๐น ุงููุชูุฌุฉ:  
OSPF ุณููุฏุฎู **ุงููุณุงุฑูู** ูู ุฌุฏูู ุงูุชูุฌูู ููุณุชุฎุฏูููุง ูุนูุง ูู ุฅุฑุณุงู ุงูุชุฑุงููู.

---

## ๐งพ ูู ุฌุฏูู ุงูุชูุฌูู

```cisco
R1# show ip route 10.0.0.0
O    10.0.0.0/24 [110/20] via 192.168.12.2, 00:00:05, Gig0/0
                      [110/20] via 192.168.13.3, 00:00:05, Gig0/1
```

๐น ููุงุญุธ ุฃู OSPF ุฃุถุงู **ูุณุงุฑูู ูุชุณุงูููู** ุฅูู ููุณ ุงููุฌูุฉ (10.0.0.0/24).  
๐น ุงูุฑุงูุชุฑ ูุณุชุฎุฏูููุง ูุนูุง ุจุงูุชูุงุฒู (Load Balancing).

---

## โ๏ธ ุงูุฅุนุฏุงุฏ ุงูุงูุชุฑุงุถู ูู Cisco

ุจุดูู ุงูุชุฑุงุถูุ Cisco IOS ูุณูุญ ุจู:

> **ุญุชู 4 ูุณุงุฑุงุช ูุชุณุงููุฉ** ุฏุงุฎู OSPF (Equal-Cost Paths).

ูุนูู ูู ูุงู ุนูุฏู 5 ูุณุงุฑุงุช ูุชุณุงููุฉุ OSPF ุณูุฎุชุงุฑ ููุท 4 ูููุง.

๐น ููููู ุชุนุฏูู ูุฐุง ุงูุฑูู ุญุชู 16 ุจุงุณุชุฎุฏุงู ุงูุฃูุฑ:

```cisco
router ospf 1
 maximum-paths 8
```

(ููููู ุงุฎุชูุงุฑ ุฃู ุฑูู ูู 1 ุฅูู 16)

---

## ๐ง ุฃููุงุน Load Balancing ูู OSPF

|ุงูููุน|ุงูุงุณู|ุงูุชูุถูุญ|
|---|---|---|
|**Equal-Cost Load Balancing**|(ECMP)|ุงูุชูุงุฒู ุจูู ูุณุงุฑุงุช ููุง ููุณ ุงููููุฉ|
|**Unequal-Cost Load Balancing**|โ ุบูุฑ ูุฏุนูู ูู OSPF|ููุท ุจุฑูุชููููุงุช ูุซู EIGRP ุชุฏุนูู|

๐ก ููุงุญุธุฉ:

> OSPF ูุง ูุฏุนู ุงูุชูุงุฒู ุจูู ูุณุงุฑุงุช ุบูุฑ ูุชุณุงููุฉ ูู ุงููููุฉ.  
> ููุท ุฅุฐุง ูุงูุช ุงูุชูููุฉ (Metric) ูุชุณุงููุฉ ุชูุงููุง.

---

## ๐ง ููู ููุฑุฑ OSPF ุฅุฐุง ูุงูุช ุงููุณุงุฑุงุช โูุชุณุงููุฉโุ

ูุนุชูุฏ ุนูู **ุงูู Metric (Cost)** ุงูุฐู ูุญุณุจู OSPF ููู ูุงุฌูุฉ.

### ุงููุนุงุฏูุฉ:

```
Cost = Reference Bandwidth / Interface Bandwidth
```

ุงููููุฉ ุงูุงูุชุฑุงุถูุฉ ูู Reference Bandwidth ูู 100 Mbps.

๐น ูุซุงู:

|Interface|Bandwidth|Cost|
|---|---|---|
|FastEthernet (100 Mbps)|100|1|
|GigabitEthernet (1 Gbps)|1000|0.1 โ ููุนุชุจุฑ 1|
|Serial (1.544 Mbps)|1.544|64|

ูุฐููุ ุฅุฐุง ูุงูุช ุงููููุฉ ุงูููุงุฆูุฉ ูุชุณุงููุฉ ุนุจุฑ ุฃูุซุฑ ูู ูุณุงุฑ โ ูุชู ุนูู Load Balancing.

---

## ๐งช ูุซุงู ุนููู (Cisco)

```cisco
router ospf 1
 network 192.168.12.0 0.0.0.255 area 0
 network 192.168.13.0 0.0.0.255 area 0
 maximum-paths 4
```

ุงููุชูุฌุฉ:

- OSPF ุณูุณุชุฎุฏู ุงููุณุงุฑูู (ุนุจุฑ R2 ูR3) ูุนูุง ูุชูุฒูุน ุงูุญูู.
    
- ููููู ูุดุงูุฏุฉ ุงููุณุงุฑุงุช ูู ุฌุฏูู ุงูุชูุฌูู:
    

```cisco
show ip route ospf
```

---

## ๐ ุฃููุงุน ุงูุชูุงุฒู ุฏุงุฎู ุงูุฑุงูุชุฑ

Cisco ูุณุชุฎุฏู ุฃุญุฏ ุงูููุนูู ุงูุชุงูููู ูุชูุฒูุน ุงูุชุฑุงููู ูุนูููุง:

|ุงูุทุฑููุฉ|ุงูุงุณู|ุงูุชูุถูุญ|
|---|---|---|
|**Per-Destination Load Balancing**|ุญุณุจ ุงููุฌูุฉ|ูู IP ูุฌูุฉ ุซุงุจุช ูุณุชุฎุฏู ููุณ ุงููุณุงุฑ ุฏุงุฆููุง|
|**Per-Packet Load Balancing**|ุญุณุจ ุงูุญุฒูุฉ|ูู Packet ูุฐูุจ ุนุจุฑ ูุณุงุฑ ูุฎุชูู (ุฃูุซุฑ ุชูุงุฒููุง ููู ุฃูู ุงุณุชูุฑุงุฑูุง)|

๐ก ุงูุงูุชุฑุงุถู ูู Cisco ูู **Per-Destination** (ุญุชู ูุง ูุณุจุจ out-of-order packets).

---

## ๐งฉ ุฃูุงูุฑ ุชุญูู ูููุฉ

```cisco
show ip route ospf
```

โ ูุนุฑุถ ุงููุณุงุฑุงุช ุงููุชูุงุฒูุฉ.

```cisco
show ip ospf
```

โ ูุนุฑุถ ุนุฏุฏ ุงููุณุงุฑุงุช ุงููุณููุญ ุจูุง.

```cisco
show ip cef
```

โ ูุนุฑุถ ููู ูุชู ุชูุฒูุน ุงูุชุฑุงููู ูุนูููุง ุจูู ุงููุณุงุฑุงุช.

---

## ๐งญ ููุฎุต ุณุฑูุน

|ุงูุนูุตุฑ|ุงูุดุฑุญ|
|---|---|
|ุงููุฏู|ุชูุฒูุน ุงูุชุฑุงููู ุจูู ุฃูุซุฑ ูู ูุณุงุฑ ูุชุณุงูู|
|ุงูุงุณู ุงูุฑุณูู|ECMP (Equal Cost Multi Path)|
|ุนุฏุฏ ุงููุณุงุฑุงุช ุงูุงูุชุฑุงุถู|4|
|ูููู ุชุนุฏูู ุงูุญุฏ ุงูุฃูุตู|ุญุชู 16 (`maximum-paths <n>`)|
|ูุนุชูุฏ ุนูู|ุงูู OSPF Metric (Cost)|
|ููุน ุงูุชูุงุฒู|Per-Destination (ุงูุชุฑุงุถู)|
|ุฏุนู ุงููุณุงุฑุงุช ุบูุฑ ุงููุชุณุงููุฉ|ุบูุฑ ูุฏุนูู ูู OSPF|

---

## ๐ก ูุซุงู ูุงูุนู ูู ุงูุดุจูุงุช ุงููุจูุฑุฉ

ูู ุดุจูุงุช ุงูุดุฑูุงุช ุฃู ุงูู ISPsุ ูุฏ ูุฑุจุท ุงููุฑุน ุงูุฑุฆูุณู ุจุนุฏุฉ ุฎุทูุท ุฅูุชุฑูุช ุฃู MPLS ุจููุณ ุงูุณุฑุนุฉ.  
ูุชู ุชูุนูู **OSPF Load Balancing** ุจูููู ุจุญูุซ ูุณุชุฎุฏู ุงูุฑุงูุชุฑ **ุฌููุน ุงูุฎุทูุท ูู ููุณ ุงูููุช**ุ ููุง ูุฒูุฏ ุงูุณุฑุนุฉ ุงูุฅุฌูุงููุฉ ููุญูู **High Availability**.

---

ูู ุชุฑุบุจ ุฃุดุฑุญ ูู ุงูุขู **ููู ูุญุณุจ OSPF ุงูู Metric (Cost)** ุจุงูุชูุตูู ูููู ูููู ุชุนุฏููู ูุฏูููุง ูุชุชุญูู ูู ุงูุชูุงุฒูุ  
ูุฐุง ูุนุชุจุฑ ุงูุฌุฒุก ุงูุชุงูู ุงููุจุงุดุฑ ูููุถูุน Load Balancing.